<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html> <head>
<title>Frequently Asked Questions (FAQ) on SNMP_Session.pm</title>
</head>

<body bgcolor="#ffffff">
<h1>Frequently Asked Questions (FAQ) on <tt>SNMP_Session.pm</tt></h1>

<hr>

<h2> <a name="snmpv3"></a>When will MRTG/<tt>SNMP_Session.pm</tt>
support SNMPv3? </h2>

<p> <tt>SNMP_Session.pm</tt> only supports SNMPv1 and
(community-based) SNMPv2 ("SNMPv2c").  There are no plans to add
SNMPv3 support to <tt>SNMP_Session.pm</tt>.  I'd recommend looking at
<a href="http://search.cpan.org/dist/Net-SNMP/">Net::SNMP</a> instead,
which has been supporting SNMPv3 for quite a while.  <a
href="http://search.cpan.org/dist/Net-SNMP/">Net::SNMP</a> is also
written much cleaner than <tt>SNMP_Session.pm</tt>, and like
<tt>SNMP_Session.pm</tt> doesn't require any external binaries.  Some
non-standard (crypto) Perl modules might be required to use SNMP's
security features, however. </p>

<p> A nice project would be to write a variant of
<tt>SNMP_util.pm</tt> that sits on top of <a
href="http://search.cpan.org/dist/Net-SNMP/">Net::SNMP</a> rather than
on top of <tt>SNMP_Session.pm</tt>.  Since <a
href="http://www.mrtg.org/">MRTG</a> uses the <tt>SNMP_util.pm</tt>
layer, that should make it work with SNMPv3. </p>

<p> However, since SNMPv3 doesn't have communities, MRTG's target
syntax would have to be changed to accomodate SNMPv3 targets.  The
current syntax of <samp>community{at}host[:options]</samp> would have
to be modified (I think it should be changed, rather than further
extended, because it already looks too ugly because of its multiple
extensions. </p>

<p> For the target syntax, one should probably look at the proposed
SNMP URI syntax (<a
href="http://www.ietf.org/internet-drafts/draft-black-snmp-uri-09.txt"><tt>draft-black-snmp-uri-09.txt</tt></a>
- this is <a
href="http://www.rfc-editor.org/queue.html#black-snmp-uri">in the
RFC&nbsp;Editor Queue</a>, so it should be published as an RFC at some
point in the future with few modifications). </p>

<p> Anther issue with SNMPv3 is that it uses engine IDs, which are
usually "discovered" using a well-defined discovery mechanism.  It
would be good to cache discovered engine IDs somewhere, to avoid
repeating the discovery process for every round of MRTG.  If MRTG is
run from cron every five minutes, then such an engine ID cache should
be written to disk between runs.  I'm not sure whether Net::SNMP
already supports this.  If MRTG is run as a long-running "daemon"
process, making the cache persistent might not be necessary. </p>

<h2> Can I integrate 3rd party tools with MRTG to get SNMPv3 support? </h2>

<p> From the command line, I often use <a
href="http://net-snmp.sourceforge.net/">Net-SNMP</a> (the former
UCD-SNMP) to access router information using SNMPv3.  I have my SNMPv3
USM credentials configured in my <samp>${HOME}/.snmp/snmp.conf</samp>
file, so I can simply call <samp>snmptable ROUTERNAME TABLENAME</samp>
without giving a community/user name. </p>

<p> It used to be the case that MRTG allowed the usage of external
SNMP command-line tools, including the CMU ones, which later became
UCD-SNMP.  Maybe this code still works? Otherwise you can use MRTG's
`script' target syntax, with a small shell script that calls Net-SNMP
and outputs the obtained values in the format in which MRTG expects
them. </p>

<hr>
<!-- hhmts start -->
2005/01/21 13:19:55
<!-- hhmts end -->
<address>

 <a href="http://www.switch.ch/misc/leinen/">
  Simon Leinen &lt;simon@switch.ch&gt;
 </a>
</address>

</body> </html>
