Sat Aug 16 00:06:21 1997  Simon Leinen  <simon@switch.ch>

	* Makefile (TESTSRCS): Added some, removed party-test.pl.

	(DOCS): Added test/README, index.html.

	(PKGSRCS): Removed Party.pm.

	(TESTSRCS): Renamed from PROGSRCS.

	Moved all test scripts to `test' subdirectory.

	* index.html, README: snmp-set Support: Added credits for matter,
 	small description on snmpset usage, updated to-do items.

	* SNMP_Session.pm: Added set-request support based on code
 	contributed my Matthew Trunnell <matter@media.mit.edu>:

	(encode_request): The former list of encoded OIDs can now also
 	contain OID/value pairs.  Those are represented by references to
 	two-element arrays, the encoded OID and the encoded value.

	(encode_set_request): New subroutine.

	(set_request_response): New subroutine.

	(request_response_4): Return undef as soon as an error response
 	packet has been received, rather than retrying.

	(unwrap_response_5): Recognize OID/value pairs (but print only the
 	OID).

	This fix doesn't really have anything to do with set-request
 	support:

	(receive_response_2): Undefine the "unwrapped" cache so that you
 	don't get the data from the last request if you ignore the error
 	return.

	($VERSION): Incremented to 0.52.

Thu Jul 31 11:56:31 1997  leinen  <leinen@bolivar>

	* test.pl: Fixed pathname to Perl.

	* SNMP_Session.pm (open): Better error messages.

	* SNMP_Session.pm: Better diagnostics:

	(request_response_4): Renamed from request_response_3, take
 	additional argument $oids.

	(receive_response_2): Renamed from receive_response_1, take
 	additional argument $oids.

	(unwrap_response_5): Renamed from unwrap_response_4, take
 	additional argument $oids.  Use this to generate error message
 	when we have an errorIndex.

	(error): New method to print an error message referring to a
 	specific session.

	(to_string): New function, factored out from `describe'.  Be much
 	more verbose.

	($VERSION): Incremented to 0.51.

Wed Jul  9 16:17:30 1997  leinen  <leinen@bolivar>

	* index.html: Document recent changes: version numbers, unsigned
 	printing.

	* SNMP_Session.pm: Added versioning as supported by Exporter.pm.

	* BER.pm: Don't die in a few places.

	($VERSION): New variable, initially 0.50.

	(version): New subroutine.

Wed Jul  2 16:02:23 1997  leinen  <leinen@bolivar>

	* BER.pm (pretty_uptime): Avoid negative times.

	* BER.pm: Removed debugging version of decode_intlike_s.

	(pretty_uptime): Use decode_unsignedlike rather than
 	decode_intlike.

	* BER.pm: Buggy version that should work with mrtg on all systems.

Thu Jun 12 09:05:17 1997  leinen  <leinen@bolivar>

	* README: Updated sample code.

	Added pointer to HTML page.

Thu Jun 12 09:00:34 1997  Simon Leinen  <simon@limmat.switch.ch>

	* test.pl, walk-test.pl:
 	Better error message for session open failure.

	* index.html: Updated for new error handling and adapted sample
 	code, note dependency on Perl 5.002, note use of strict.

Thu Jun 12 08:47:53 1997  Simon Leinen  <simon@limmat.switch.ch>

	* BER.pm, SNMP_Session.pm: Require Perl 5.002.

	* SNMP_Session.pm: Be less strict.

Mon Apr 28 18:55:20 1997  Simon Leinen  <simon@limmat.switch.ch>

	* README, index.html: Moved my home page to
 	http://www.switch.ch/misc/leinen/.

Thu Apr  3 14:08:26 1997  Simon Leinen  <simon@limmat.switch.ch>

	* index.html: Point to .tar.gz rather than .shar.

	* Makefile (shar): Make a tar.gz file, too, and install both under
 	$(DESTDIR).

	* BER.pm (encode_int_0): New exported subroutine that generates
 	the BER encoding for the integer zero.

	* SNMP_Session.pm: Never die on exceptional situations, but write
 	a warning and return undef.

	(encode_request): Use encode_int_0.

	(unwrap_response_4): Better diagnostics for unparseable and error
 	responses.

Mon Mar 24 09:16:03 1997  Simon Leinen  <simon@limmat.switch.ch>

	* BER.pm: Handle unsigned integers correctly.

Fri Feb 21 09:07:03 1997  Simon Leinen  <simon@limmat.switch.ch>

	* SNMP_Session.pm (unwrap_response_4): Integrated fix by Tobi
 	Oetiker for doubly declared lexical variable $request_id.

Mon Feb 17 13:31:39 1997  Simon Leinen  <simon@limmat.switch.ch>

	* index.html: Mrtg: Don't mention beta version 2.0 anymore, since
 	this has now been released.

	* README, index.html: SNMP_Session::open -> SNMP_Session->open
 	(thanks to "Robert Weatherford(grim)" <rweather@ctron.com>)

Mon Feb 17 13:26:16 1997  switch  <switch@celeste.switch.ch>

	* BER.pm (@EXPORT): Export `encoded_oid_prefix_p'.

	(encoded_oid_prefix_p): Handle subids > 127.

	Return length of prefix in second encoded OID as a result.

	(decode_subid): New subroutine that decodes a single subid from an
 	encoded OID.

Sun Feb  2 16:47:30 1997  simon  <simon@celeste.switch.ch>

	* asn1-test.pl: Added test for sequence decoding.

	* ASN_1.pm (ASN_1::Sequence): Fixed `new' method.

	(decode): Added Sequence decoding.

	* asn1-test.pl, ASN_1.pm: Initial revision

Sat Feb  1 17:42:01 1997  Simon Leinen  <simon@switch.ch>

	* Makefile (PROGSRCS): Added ber-test.pl.

	* BER.pm: Use integer.

	(decode_intlike): Simplified by writing a proper loop to decode
 	octet by octet.  This should also solve any problems with signed
 	vs. unsigned.

	* ber-test.pl (decode_intlike_test): New subroutine.

	(regression_test): Use it.

	* ber-test.pl: Use integer.

	Added several test cases.

	* ber-test.pl: Initial revision

	* BER.pm (regression_test): Removed.  This is now in ber-test.pl.

Wed Jan 15 08:56:54 1997  leinen  <leinen@ohiggins>

	* SNMP_Session.pm: Backed out the changes between revisions 1.27
 	and 1.28 that used the new subroutines in Socket.pm.  It turned
 	out that those routines require Perl 5.002 or later.  Put the new
 	code back in and commented it out with clear notices - look for
 	the markers "Perl 5.002 or later" and "end of pre-5.002 code".

Tue Jan 14 09:01:57 1997  leinen  <leinen@ohiggins>

	* BER.pm, SNMP_Session.pm: Commented out use strict/use vars and
 	explain why.

Mon Jan 13 13:28:04 1997  leinen  <leinen@ohiggins>

	* BER.pm: Updated my e-mail address in the header comment.

Tue Jan  7 16:38:48 1997  leinen  <leinen@ohiggins>

	* index.html: Updated from latest README.

	Added section with recent changes and credits.

	* README: Updated from latest index.html.

	* SNMP_Session.pm: Make better use of the functionality in
 	Socket.pm.

Thu Dec 26 17:31:32 1996  Simon Leinen  <simon@switch.ch>

	* SNMP_Session.pm (receive_response_1): Perform the address check
 	only if debugging is set on the session.

	* SNMP_Session.pm (receive_response_1): Don't return failure if
 	response comes from a different address.  Also, the warning is
 	only issued if debugging is set for the session.

Fri Dec 20 14:50:03 1996  Simon Leinen  <simon@switch.ch>

	* SNMP_Session.pm: Import @ISA from vars.

	Added debugging.

	Fixed header comment.

	(unwrap_response_4): Removed spurious argument to
	decode_by_template().

	* BER.pm: Use strict.

	(pretty_print): Declare $result as lexical variable.

	(decode_by_template): Implement %i and %s without prefix arguments.

	(encoded_oid_prefix_p): Declare $subid1, $subid2 lexical.

Fri Dec 20 09:56:28 1996  Simon Leinen  <simon@switch.ch>

	* SNMP_Session.pm ($default_timeout, $default_retries,
 	$default_backoff): New values.  Improved following discussions on
 	the mrtg mailing list.

	(encode_request): Increment request ID.

	(request_response_3): Renamed from `request_response'.  Added
 	`response_tag' argument.  Unwrap each received response.  If this
 	fails because of mismatching community or request ID, just ignore
 	the request and retry.

	(SNMPv1_Session::open): Cast the random request ID to an int.

	(unwrap_response_4): Renamed from `unwrap_response'.  Added
 	`request_id' argument.

	Check community and request ID and return undefined if there is a
 	mismatch.

	(receive_response_1): Renamed from `receive_response'.  Added
 	`response_tag' parameter.

	Fixed report of response from bad address.

Tue Dec 17 18:16:55 1996  Simon Leinen  <simon@switch.ch>

	* SNMP_Session.pm: Stripped contributor entries.

	(decode_get_response): Call unwrap_response via eval and simply
 	return zero when it dies.

	(receive_response): Return zero if response comes from different
 	address.

	(request_response): Wait for another packet when receive_response
 	fails.

	* BER.pm: Contributors list: slightly fixed.

	(encode_oid): Removed comments.

Tue Dec 17 13:54:42 1996  Simon Leinen  <simon@switch.ch>

	* walk-test.pl: Changed path to Perl.

	($hostname): Changed default.

	* SNMP_Session.pm: Updated my e-mail address.

	* BER.pm (encode_oid): Added check for negative OID subids, by
 	Yufang HU <yhu@casc.com>

	support up to 32bit subids, by Philippe Simonet
 	<sip00@vg.swissptt.ch>.

Sun Aug 25 23:49:15 1996  Simon Leinen  <simon@instrumatic.ch>

	* SNMP_Session.pm (request_response):
	Perform retries with exponential backoff.

	(retries, backoff): New slots of the SNMP_Session object.  Default
 	values are 3 and 1.5, respectively.

Wed Jul 10 08:18:16 1996  Simon Leinen  <simon@instrumatic.ch>

	* README: Added Heine Peters to contributors list.

	* walk-test.pl: Accept hostname and community as command-line
 	arguments.  These default to ``neon-tetra'' and ``public'',
 	respectively.

	* SNMP_Session.pm: New header comment.

Wed Jul 10 08:06:11 1996  Tobias Oetiker  <oetiker@ee.ethz.ch>

	Changed default timeout from 2 to 10 seconds.

Wed Jul 10 08:06:11 1996  Heine Peters  <peters@dkrz.de>

	Allow remote host to be specified as IP address in dotted-quad
	notation rather than by name (integrated change dated April 25).

	No longer bind the UDP socket to a specific address.

Tue Jul  9 09:40:28 1996  Simon Leinen  <simon@instrumatic.ch>

	* README: Added list of contributors.

	Added pointer to mrtg 2.0.

Tue Jul  9 08:41:22 1996  Simon Leinen  <simon@instrumatic.ch>

	* BER.pm (decode_intlike): Fixed shifting of first byte.

	* BER.pm: Reformatted the header comment and added my name.

	* BER.pm (decode_string): Cleaned up by removing my old code that
 	had been commented out by Andrzej Tobola when he fixed it.

Tue Jul  9 08:41:22 1996  Andrzej Tobola  <san@iem.pw.edu.pl>

	* BER.pm (decode_string): Support long strings by using
	decode_length.

Tue Jul  9 08:41:22 1996  Tobias Oetiker  <oetiker@ee.ethz.ch>

	* BER.pm (decode_intlike): Handle five-byte integers.

Tue Jul  9 08:41:22 1996  Dave Rand  <dlr@Bungi.com>

	* BER.pm (pretty_uptime): New subroutine to print sysUpTime
	readably.

Mon Jul  8 17:15:43 1996  Simon Leinen  <simon@instrumatic.ch>

	* README: Updated my e-mail address.

	Note that get-next is now supported.

	* Makefile (PROGSRCS): Added walk-test.pl.

	* walk-test.pl: Initial revision

	* test.pl: Actually use the hostname passed on the command line.

	* BER.pm (encoded_oid_prefix_p): New subroutine that checks
 	whether one encoded OID is a prefix of the other.

	* SNMP_Session.pm (request_response): New function called by both
 	get_request_response and getnext_request_response.

	* SNMP_Session.pm:
	(getnext_request, encode_getnext_request,
 	getnext_request_response): New functions.

	(encode_request): New subroutine called by both encode_get_request
 	and encode_getnext_request.

	* BER.pm (pretty_oid): Print subids beyond 127 CORRECTLY.

	* BER.pm (pretty_oid): Print subids beyond 127.

	* BER.pm (pretty_print): Call `pretty_ip_address' for objects with
 	snmp_ip_address_tag.

	(pretty_ip_address): New subroutine that prints an IP address
 	object in decimal quad notation.

Wed Jun 12 15:55:20 1996  Simon Leinen  <simon@instrumatic.ch>

	* BER.pm (encode_oid): Support OID subids up to 16383, up from 127.

Fri Dec 22 11:45:02 1995  Simon Leinen  <simon@instrumatic.ch>

	* wwwtest: Added forward definitions of all subroutines.

	Check whether the hostname is in the list of allowed hosts.

	(html_error_message): added horizontal line below the title.

Fri Jul 28 17:23:14 1995  Simon Leinen  <simon@lia.di.epfl.ch>

	* wwwtest (write_query_form): added a footer with links to the
 	SNMP module's page, the gateway's source and my home page.

Mon Jul 17 13:51:04 1995  Simon Leinen  <simon@lia.di.epfl.ch>

	* Makefile (DOCS): removed ChangeLog.

Thu Jul  6 13:15:59 1995  Simon Leinen  <simon@lia.di.epfl.ch>

	* test.pl, wwwtest, SNMP_Session.pm:
	Use accessor methods for slots of SNMP_Session.

Thu Jul  6 12:57:37 1995  Simon Leinen  <simon@lia.di.epfl.ch>

	* test.pl (%ugly_oids): use qw() to define them, as in wwwtest.

	* test.pl: Simplified a tiny bit by adding the instance numbers to
 	the parameters of snmp_get.

Wed Jul  5 22:11:47 1995  Simon Leinen  <simon@lia.di.epfl.ch>

	* wwwtest, party-test.pl: Added header comment.

	* BER.pm, Party.pm: Added comments.

	* Makefile (ALLDIST): mention $(DOCS) before $(ALLSRCS) so that
 	the README is the first file in a shar archive.

Wed Jul  5 21:39:49 1995  Simon Leinen  <simon@lia.di.epfl.ch>

	* wwwtest (html_error_message, html_quote): moved to the end of
 	the file.

	* wwwtest (write_query_form): default to liasg7 to simplify
 	testing at home.

	* wwwtest (query_to_html_response): added heading containing the
 	name of the queried host.

	(write_query_form): use here document to reduce quoting.

	* wwwtest: Moved handling of parameterless case to
 	`write_query_form()'.

	(write_query_form): new procedure.

	(parse_query): return result rather than putting it in global hash
 	%query.

	* wwwtest: Changed form to use SELECT tags so that there is a very
 	limited choice of host and community names.

	* wwwtest: If called without QUERY_STRING, act as a form that
 	allows the user to specify a host and community name.

	If called with a QUERY_STRING, extract host and community name and
 	use this as the target of the query.

	Wrap SNMP session creation and get query in evals, and generate a
 	HTML error message if one of them fails.

	* SNMP_Session.pm (host_not_found_error): generate an error
 	message trying to explain why a given host hasn't been found by
 	one of the gethostby...() routines.

	(open): use `host_not_found_error' to generate better error
 	messages.

	* test.pl: Added header comment.

	Parse command-line arguments.

Mon Jul  3 13:53:26 1995  Simon Leinen  <simon@lia.di.epfl.ch>

	* README: Explain how to encode OIDs.

	Explain (roughly) how to decode the results.

Wed Jun 28 22:47:48 1995  Simon Leinen  <simon@lia.di.epfl.ch>

	* wwwtest: Removed HP-agent-specific variables so that I can test
 	the code against CMU SNMPv2.

Wed Jun 28 22:46:55 1995  Simon Leinen  <simon@lia.di.epfl.ch>

	* Makefile (DOCS, ALLDIST): new variables.

	(shar): new target.

	* SNMP_Session.pm:
	Moved the SNMPv1-specific parts to a subclass SNMPv1_Session.

	* Makefile, ChangeLog: Initial revision

Wed Jun 28 21:41:51 1995  Simon Leinen  <simon@lia.di.epfl.ch>

	* party-test.pl: Initial revision

	* Party.pm: use BER.

	* Party.pm: Initial revision

	* SNMP_Session.pm (snmp_version_1, snmp_version_2): new subroutines.

	(open): fixed typo in getprotobyname('udp').

Mon Jun 19 19:43:12 1995  Simon Leinen  <simon@lia.di.epfl.ch>

	* README (Example): use package BER, remove BER:: prefixes.

	* wwwtest, test.pl: use BER.

	Removed BER:: package prefixes.

	* BER.pm: use Exporter.

	* README: Tabified.

Wed Jun 14 21:59:15 1995  Simon Leinen  <simon@lia.di.epfl.ch>

	* wwwtest (snmp_get):
	produce HTML error message when get_request_response fails.

	* SNMP_Session.pm (get_request_response):
	don't warn if wait_for_response fails, return
	0.

	* wwwtest (%ugly_oids):
	added a couple of statistics about the first two
	interfaces.

	* BER.pm (pretty_print): format null objects as "(null)".

	* wwwtest: Generate more properly structured HTML.

	(%ugly_oids): Reformatted, added some variables.

Mon Jun 12 15:43:36 1995  Simon Leinen  <simon@lia.di.epfl.ch>

	* README: Initial revision

Fri May 19 17:07:46 1995  Simon Leinen  <simon@lia.di.epfl.ch>

	* BER.pm (decode_by_template):
	improve error message for length mismatch.

	(decode_length): support lengths up to 65536.

	* BER.pm (decode_intlike): support length 3 integers.

	Fix error message for unsupported integer length.

	* BER.pm: Added SNMP-specific tags (counter, gauge, IP address etc.)

	(pretty_print): handle counters and gauges, which are treated just
	like integers.

	* wwwtest: Initial revision

Thu May 18 22:18:41 1995  Simon Leinen  <simon@lia.di.epfl.ch>

	* BER.pm, SNMP_Session.pm: Added -*- mode -*- comment for Emacs.

	* test.pl: Layout change.

	* BER.pm: Export several symbols.

	(decode_by_template): assume the constructor flag when the user gives
	a tag value in a %{ option.

	* SNMP_Session.pm: Use the BER package, removed BER:: prefixes.

	* BER.pm (decode_by_template): avoid recursion.

	* SNMP_Session.pm (open):
	generate a file handle so that multiple sessions can be used
	at the same time.

	* SNMP_Session.pm:
	Use symbolic constants for PDU tags and default UDP port.

	(describe): include timeout value in the output.

	* test.pl: Removed `&'s before subroutine names.

	* BER.pm: Improved layout.

	(decode_string): Improved error message.

	* BER.pm: Use symbolic constants for tags and flags.

	* SNMP_Session.pm:
	Use `Socket.pm' to get the socket constants (AF_INET, SOCK_DGRAM).

	* test.pl (snmp_get): new subroutine.

	* BER.pm (pretty_using_decoder): new function.

	(pretty_string, pretty_int): use it.

	* test.pl: Use a different mechanism to pretty print OIDs.

	* SNMP_Session.pm:
	Renamed the `socket' member to `sock' in order to avoid confusion.

	* test.pl: Moved the BER and SNMP_Session packages to subfiles.

	* BER.pm (decode_by_template):
	in the %i handler, cast $expected to int in
	order to fix false mismatches.

	* BER.pm, SNMP_Session.pm, test.pl: Initial revision

